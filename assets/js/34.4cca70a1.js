(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{309:function(t,a,e){"use strict";e.r(a);var s=e(10),r=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"geoserver-学习记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geoserver-学习记录"}},[t._v("#")]),t._v(" GeoServer 学习记录")]),t._v(" "),a("h2",{attrs:{id:"基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础"}},[t._v("#")]),t._v(" 基础")]),t._v(" "),a("p",[t._v("GeoServer 是一个基于Java的服务器，建立在GeoTools之上，用于查看和编辑GIS数据，内部集成了Openlayers。"),a("a",{attrs:{href:"https://docs.geoserver.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"下载安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装"}},[t._v("#")]),t._v(" 下载安装")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://sourceforge.net/projects/geoserver/files/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网下载"),a("OutboundLink")],1),t._v("下载生产版本，解压至目标文件夹")]),t._v(" "),a("ul",[a("li",[t._v("Platform Independent Binary 独立于平台的二进制文件")]),t._v(" "),a("li",[t._v("Windows Installer windows 环境的jar包，必须有java环境 "),a("strong",[t._v("开发环境")])]),t._v(" "),a("li",[t._v("Web Archive  war包，可以丢在tomcat里启动  "),a("strong",[t._v("生产环境")])])]),t._v(" "),a("p",[t._v("windows环境安装 需要配置java环境")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.geoserver.org/latest/en/user/installation/linux.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("linux环境下安装"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),a("p",[t._v("进入bin目录，执行命令：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("startup.sh\n")])])]),a("p",[t._v("浏览器中输入：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("http://localhost:8080/geoserver\n")])])]),a("p",[t._v("账户名密码：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("用户名：admin，密码：geoserver\n")])])]),a("h3",{attrs:{id:"问题总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题总结"}},[t._v("#")]),t._v(" 问题总结")]),t._v(" "),a("h4",{attrs:{id:"版本特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本特性"}},[t._v("#")]),t._v(" 版本特性")]),t._v(" "),a("ul",[a("li",[t._v("版本2.22.x 需要Java8或者Java11环境")]),t._v(" "),a("li",[t._v("版本2.23.x以后 需要Java11或者Java17环境")]),t._v(" "),a("li",[t._v("版本2.6以前使用Jetty作为内置服务器，之后使用tomcat")])]),t._v(" "),a("h4",{attrs:{id:"geoserver跨域问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geoserver跨域问题"}},[t._v("#")]),t._v(" geoserver跨域问题")]),t._v(" "),a("p",[t._v("修改geoserver\\webapps\\geoserver\\WEB-INF\\web.xml文件")]),t._v(" "),a("p",[t._v("将下面这两段取消注释")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Uncomment following filter to enable CORS in Jetty. Do not forget the second config block further down.\n    <filter>\n      <filter-name>cross-origin</filter-name>\n      <filter-class>org.eclipse.jetty.servlets.CrossOriginFilter</filter-class>\n      <init-param>\n        <param-name>chainPreflight</param-name>\n        <param-value>false</param-value>\n      </init-param>\n      <init-param>\n        <param-name>allowedOrigins</param-name>\n        <param-value>*</param-value>\n      </init-param>\n      <init-param>\n        <param-name>allowedMethods</param-name>\n        <param-value>GET,POST,PUT,DELETE,HEAD,OPTIONS</param-value>\n      </init-param>\n      <init-param>\n        <param-name>allowedHeaders</param-name>\n        <param-value>*</param-value>\n      </init-param>\n    </filter>\n    --\x3e")]),t._v("\n\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Uncomment following filter to enable CORS\n    <filter-mapping>\n        <filter-name>cross-origin</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n    --\x3e")]),t._v("\n")])])]),a("h2",{attrs:{id:"发布wms服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布wms服务"}},[t._v("#")]),t._v(" 发布WMS服务")]),t._v(" "),a("h3",{attrs:{id:"发布图像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布图像"}},[t._v("#")]),t._v(" 发布图像")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("数据准备")]),t._v("，放置在数据目录目录E:\\ProgramData\\geoserver\\data下")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("创建工作区")]),t._v("，指定名称和url")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("创建一个数据Store")]),t._v(":数据源选择WorldImage,选择本地影像")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("创建一个图层")]),t._v(":新建图层、选择数据、点击发布，进入配置页面")]),t._v(" "),a("ul",[a("li",[t._v("基本参考信息：命名、标题、摘要")]),t._v(" "),a("li",[t._v("坐标参考系统：强制声明会使用内部EPSG定义的WGS84，而非提供的 投影文件")]),t._v(" "),a("li",[t._v("边框：由SRS计算，由native计算")])]),t._v(" "),a("p",[t._v("配置完成后，点击发布")]),t._v(" "),a("ul",[a("li",[t._v("预览图层:")])]),t._v(" "),a("p",[t._v("注：SRS是指空间参考系统")])])]),t._v(" "),a("h3",{attrs:{id:"发布geopackage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布geopackage"}},[t._v("#")]),t._v(" 发布GeoPackage")]),t._v(" "),a("p",[t._v("和发布图像类似，store和数据源有所不同")]),t._v(" "),a("h3",{attrs:{id:"发布图层组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布图层组"}},[t._v("#")]),t._v(" 发布图层组")]),t._v(" "),a("ol",[a("li",[t._v("首先发布若干单个图层")]),t._v(" "),a("li",[t._v("创建图层组，可以将同一工作空间的不同图层组合在一起，并调整顺序")]),t._v(" "),a("li",[t._v("确定坐标系，生成边界")])]),t._v(" "),a("h3",{attrs:{id:"发布样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布样式"}},[t._v("#")]),t._v(" 发布样式")]),t._v(" "),a("ol",[a("li",[t._v("创建样式")]),t._v(" "),a("li",[t._v("输入名称、选择工作空间、格式和图例")]),t._v(" "),a("li",[t._v("选择样式内容，并生成配置文件xml，自定义样式文件")]),t._v(" "),a("li",[t._v("在发布页面，找到对应的图层")]),t._v(" "),a("li",[t._v("在图层预览中浏览")])]),t._v(" "),a("h3",{attrs:{id:"发布shapefile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布shapefile"}},[t._v("#")]),t._v(" 发布shapefile")]),t._v(" "),a("ol",[a("li",[t._v("创建数据store，选择数据源shp文件，指定DBF 字符集")]),t._v(" "),a("li",[t._v("在发布界面，由数据生成边界框，投影的和经纬度的")])]),t._v(" "),a("h3",{attrs:{id:"发布postgis-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布postgis-table"}},[t._v("#")]),t._v(" 发布PostGIS table")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.geoserver.org/latest/en/user/gettingstarted/postgis-quickstart/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("发布postgis表"),a("OutboundLink")],1)]),t._v(" "),a("ol",[a("li",[t._v("首先安装postgresql和对应版本的postgis扩展")]),t._v(" "),a("li",[t._v("创建数据库并导入官方案例数据")]),t._v(" "),a("li",[t._v("在geoserver页面创建新的数据仓库，添加postgis数据,配置连接参数")]),t._v(" "),a("li",[t._v("添加新的图层，选择刚刚创建的数据仓库，计算边界框")]),t._v(" "),a("li",[t._v("发布界面设置数据类型为polygon，保存")])]),t._v(" "),a("h2",{attrs:{id:"发布wmts服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布wmts服务"}},[t._v("#")]),t._v(" 发布WMTS服务")]),t._v(" "),a("p",[t._v("Geoserver内置了GeoWebCache服务，可以将图层提前切片保存")]),t._v(" "),a("h3",{attrs:{id:"图层切片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图层切片"}},[t._v("#")]),t._v(" 图层切片")]),t._v(" "),a("ul",[a("li",[t._v("在Tile Layers中找到对应的图层 点击seed/Truncate")]),t._v(" "),a("li",[t._v("编辑图层切片参数")]),t._v(" "),a("li",[t._v("点击submit创建切片任务")]),t._v(" "),a("li",[t._v("切出的地图瓦片在geoserver\\gwc\\huyadish_basemap目录")]),t._v(" "),a("li",[t._v("可在预览中查看服务URL")])]),t._v(" "),a("h3",{attrs:{id:"cesium中使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cesium中使用"}},[t._v("#")]),t._v(" Cesium中使用")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 原始URL\nhttp://localhost:8080/geoserver/gwc/service/wmts/rest/huyadish:basemap/{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/png\n\n// cesium中修改\nhttp://localhost:8080/geoserver/gwc/service/wmts/rest/huyadish:basemap/{style}/{TileMatrixSet}/{TileMatrixSet}:{TileMatrix}/{TileRow}/{TileCol}?format=image/png\n")])])]),a("p",[t._v("使用案例")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 本地发布的WMS服务,layers可选countries、SR_50M、basemap")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" geoserverWMSProvider "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WebMapServiceImageryProvider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8080/geoserver/huyadish/wms'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("layers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'huyadish:countries'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("parameters")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("service")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WMS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里要看geoserver发布服务支持的格式,png、gif、jpeg")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image/png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里1.1.1和1.1.0均可")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.1.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transparent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 本地发布的WMTS服务")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" geoserverWMTSProvider "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cesium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WebMapTileServiceImageryProvider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8080/geoserver/gwc/service/wmts/rest/huyadish:basemap/{style}/{TileMatrixSet}/{TileMatrixSet}:{TileMatrix}/{TileRow}/{TileCol}?format=image/png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("layer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'huyadish:basemap'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("style")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image/png'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tileMatrixSetID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EPSG:900913'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//EPSG需要修改")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("maximumLevel")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"发布wcf服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布wcf服务"}},[t._v("#")]),t._v(" 发布WCF服务")]),t._v(" "),a("h2",{attrs:{id:"发布wfs服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布wfs服务"}},[t._v("#")]),t._v(" 发布WFS服务")])])}),[],!1,null,null,null);a.default=r.exports}}]);