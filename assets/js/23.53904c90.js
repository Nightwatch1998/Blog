(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{306:function(s,t,a){"use strict";a.r(t);var e=a(10),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"docker从入门到精通"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker从入门到精通"}},[s._v("#")]),s._v(" Docker从入门到精通")]),s._v(" "),t("h2",{attrs:{id:"docker概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker概述"}},[s._v("#")]),s._v(" Docker概述")]),s._v(" "),t("h3",{attrs:{id:"docker为什么出现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker为什么出现"}},[s._v("#")]),s._v(" Docker为什么出现")]),s._v(" "),t("p",[s._v("一款产品从应用到上线，需要配置负复杂的运行环境，需要考虑不同版本环境的兼容，而且不能跨平台，移植到另一台服务器又得重新配置一遍。")]),s._v(" "),t("p",[s._v("Docker通过镜像将应用程序所需的系统环境进行打包，解决环境配置的诸多问题。")]),s._v(" "),t("p",[s._v("Docker将应用程序运行在容器上，而容器在任何操作系统上都是一致的，这就实现了跨平台、跨服务器。“一次封装、到处运行”。")]),s._v(" "),t("p",[s._v("在容器技术出现之前，业界网红是"),t("strong",[s._v("虚拟机")]),s._v("。虚拟机的代表，是"),t("strong",[s._v("VMWare")]),s._v("和"),t("strong",[s._v("OpenStack")]),s._v("。虚拟机技术是虚拟出一套硬件之后，在其上运行一个完整的操作系统，在操作系统上再运行所需应用。")]),s._v(" "),t("p",[t("strong",[s._v("Docker和虚拟机的区别？")])]),s._v(" "),t("ul",[t("li",[s._v("虚拟机占用资源多，冗余步骤多，启动慢")]),s._v(" "),t("li",[s._v("容器内的应用直接运行于宿主机内核，容器没有自己的内核，也没有硬件虚拟，因此更为轻便。")]),s._v(" "),t("li",[s._v("每个容器相互隔离，每个容器有自己的文件系统，容器间进程不会互相影响，能区分计算资源。")])]),s._v(" "),t("h3",{attrs:{id:"docker能干嘛"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker能干嘛"}},[s._v("#")]),s._v(" Docker能干嘛")]),s._v(" "),t("ul",[t("li",[s._v("更快的应用交付和部署")]),s._v(" "),t("li",[s._v("更便捷的升级和扩容")]),s._v(" "),t("li",[s._v("更简单的系统运维")]),s._v(" "),t("li",[s._v("更高效的计算资源利用")])]),s._v(" "),t("h2",{attrs:{id:"docker安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[s._v("#")]),s._v(" Docker安装")]),s._v(" "),t("h3",{attrs:{id:"centos7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7"}},[s._v("#")]),s._v(" Centos7")]),s._v(" "),t("p",[s._v("这里使用了腾讯云个人用户1个月试用的云服务器")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.docker.com/guides/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网地址"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("安装：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# step 1: 安装必要的一些系统工具  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" yum-utils device-mapper-persistent-data lvm2\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Step 2: 添加添加阿里云镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Step 3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s+download.docker.com+mirrors.aliyun.com/docker-ce+'")]),s._v(" /etc/yum.repos.d/docker-ce.repo\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Step 4: 更新并安装Docker-CE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum makecache fast  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成缓存")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Step 5: 开启Docker服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" start\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Step 6: 检查是否安装成功")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" version\n")])])]),t("p",[s._v("卸载：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker-ce\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /var/lib/docker\n")])])]),t("blockquote",[t("p",[s._v("说明：")]),s._v(" "),t("ul",[t("li",[s._v("yum-utils管理yum配置和存储库,device-mapper-persistent-data用于逻辑卷管理，lvm2用于动态调整磁盘分区大小")])])]),s._v(" "),t("h3",{attrs:{id:"腾讯云镜像加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#腾讯云镜像加速"}},[s._v("#")]),s._v(" 腾讯云镜像加速")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://cloud.tencent.com/document/product/1141/63910",target:"_blank",rel:"noopener noreferrer"}},[s._v("容器镜像服务个人版使用说明"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" login ccr.ccs.tencentyun.com "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxxxxxxxxxx\n")])])]),t("p",[s._v("执行以下命令，打开 "),t("code",[s._v("/etc/docker/daemon.json")]),s._v(" 配置文件。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/docker/daemon.json\n")])])]),t("p",[s._v("按 "),t("strong",[s._v("i")]),s._v(" 切换至编辑模式，添加以下内容，并保存。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://mirror.ccs.tencentyun.com"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("执行以下命令，重启 Docker 即可。示例命令以 CentOS 7 为例。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])])]),t("p",[s._v("查看镜像仓库地址")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" info\n")])])]),t("h2",{attrs:{id:"docker常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker常用命令"}},[s._v("#")]),s._v(" Docker常用命令")]),s._v(" "),t("h3",{attrs:{id:"帮助命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#帮助命令"}},[s._v("#")]),s._v(" 帮助命令")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" version  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" info  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" 命令 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("\n")])])]),t("p",[t("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/buildx/build/",target:"_blank",rel:"noopener noreferrer"}},[s._v("帮助文档地址"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"镜像命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像命令"}},[s._v("#")]),s._v(" 镜像命令")]),s._v(" "),t("p",[t("strong",[s._v("docker images")]),s._v(" 查看本地主机上的镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-7-centos docker"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nhello-world   latest    d2c94e258dcb   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" months ago   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选项")]),s._v("\n  -a, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--all")]),s._v("             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有镜像")]),s._v("\n  -q, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--quiet")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示镜像ID")]),s._v("\n\n")])])]),t("p",[t("strong",[s._v("docker search")]),s._v(" 搜索镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-7-centos docker"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker search mysql")]),s._v("\nNAME                              DESCRIPTION                                     STARS     OFFICIAL\nmysql                             MySQL is a widely used, open-source relation…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15301")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmariadb                           MariaDB Server is a high performing "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" sou…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5828")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nphpmyadmin                        phpMyAdmin - A web interface "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" MySQL and M…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1017")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选项,搜索收藏3000以上的镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--filter")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("STARS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("\n")])])]),t("p",[t("strong",[s._v("docker pull")]),s._v(" 下载镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载镜像docker pull 镜像名[:tag]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-7-centos docker"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull mysql")]),s._v("\nUsing default tag: latest  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果不写tag，默认就是latest")]),s._v("\nlatest: Pulling from library/mysql\nd9a40b27c30f: Pull complete  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分层下载, docker image的核心 联合文件系统")]),s._v("\nfe4b01031aab: Pull complete\naa72c34c4347: Pull complete\n473ade985fa2: Pull complete\ncc168a9482de: Pull complete\n3ca3786815dd: Pull complete\n3e3fac98ea83: Pull complete\n10e5505c3ae4: Pull complete\na79ade39aab9: Pull complete\nae34d51c6da2: Pull complete\nDigest: sha256:d8df069848906979fd7511db00dc22efeb0a33a990d87c3c6d3fcdafd6fc6123 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 签名")]),s._v("\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mysql:latest\ndocker.io/library/mysql:latest  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 真实地址")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等价命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull docker.io/library/mysql:latest\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定版本下载")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull mysql:8.0\n")])])]),t("p",[t("strong",[s._v("docker rmi")]),s._v(" 删除镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-7-centos docker"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rmi -f 容器ID      # 删除指定容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-7-centos docker"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rmi -f 容器ID 容器ID 容器ID     # 删除指定容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@VM-20-7-centos ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rmi -f $(docker images -aq)   # 删除所有命令，拿到所有的ID，再用ID去删除")]),s._v("\n")])])]),t("h3",{attrs:{id:"容器命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器命令"}},[s._v("#")]),s._v(" 容器命令")]),s._v(" "),t("h2",{attrs:{id:"docker镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像"}},[s._v("#")]),s._v(" Docker镜像")]),s._v(" "),t("h2",{attrs:{id:"容器数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器数据卷"}},[s._v("#")]),s._v(" 容器数据卷")]),s._v(" "),t("h2",{attrs:{id:"dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" DockerFile")]),s._v(" "),t("h2",{attrs:{id:"docker-网络讲解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-网络讲解"}},[s._v("#")]),s._v(" Docker 网络讲解")]),s._v(" "),t("h2",{attrs:{id:"idea整合docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#idea整合docker"}},[s._v("#")]),s._v(" IDEA整合Docker")])])}),[],!1,null,null,null);t.default=r.exports}}]);